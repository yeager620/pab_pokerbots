[02:12:43] ================================================================================
[02:12:43] 🎪 COMPREHENSIVE POKER BOT TOURNAMENT TEST
[02:12:43] ================================================================================
[02:12:43] 📝 Logging to: poker_test_results_20250811_021243.txt
[02:12:43] 🕐 Test started: 2025-08-11T02:12:43.910006
[02:12:43] 
[02:12:43] 🎯 TEST OBJECTIVES:
[02:12:43]   • Verify Texas Hold'em gameplay mechanics
[02:12:43]   • Track chip stacks and betting actions
[02:12:43]   • Log bot eliminations and bankruptcies
[02:12:43]   • Ensure gameplay follows proper poker rules
[02:12:43]   • Run until single winner remains
[02:12:43] 
[02:12:43] ✅ Database and environment initialized
[02:12:43] 
[02:12:43] 🤖 STEP 1: Creating and submitting bots...
[02:12:43]   ✅ AliceBot submitted (ID: 1) - Conservative player - tends to fold weak hands
[02:12:43]   ✅ BobBot submitted (ID: 2) - Aggressive player - likes to bet and raise
[02:12:43]   ✅ CharlieBot submitted (ID: 3) - Random player - unpredictable actions
[02:12:44]   ✅ DianaBot submitted (ID: 4) - Tight player - only plays strong hands
[02:12:44]   ✅ EveBot submitted (ID: 5) - Conservative backup player
[02:12:44]   ✅ FrankBot submitted (ID: 6) - Aggressive backup player
[02:12:44] 
🏆 Created 6 bots total
[02:12:44] 
[02:12:44] 🏆 STEP 2: Creating tournament...
[02:12:44]   ✅ Tournament 'Verbose Texas Hold'em Tournament' created (ID: 1)
[02:12:44]   📊 Max participants: 6
[02:12:44] 
[02:12:44] 📝 STEP 3: Registering bots in tournament...
[02:12:44]   ✅ AliceBot registered successfully
[02:12:44]   ✅ BobBot registered successfully
[02:12:44]   ✅ CharlieBot registered successfully
[02:12:44]   ✅ DianaBot registered successfully
[02:12:44]   ✅ EveBot registered successfully
[02:12:44]   ✅ FrankBot registered successfully
[02:12:44] 
[02:12:44] 🚀 STEP 4: Starting tournament...
[02:12:44]   ✅ {'success': True, 'message': 'Tournament started with 6 participants', 'first_round_matches': 3}
[02:12:44] 
[02:12:44] ⏳ STEP 5: Monitoring tournament progress...
[02:12:44] ============================================================
[02:12:44] 🏆 TOURNAMENT STATUS: RUNNING (waited 0s)
[02:12:44] 📊 Current standings (0 remaining):
[02:12:44] 💥 CRITICAL ERROR: Method 'close()' can't be called here; method 'commit()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5> (Background on this error at: https://sqlalche.me/e/20/isce)
[02:12:44] Traceback:
Traceback (most recent call last):
  File "/Users/yeager/Documents/pab_pokerbots/verbose_poker_test.py", line 164, in run_verbose_tournament_test
    elif tournament.status == TournamentStatus.CANCELLED:
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'TournamentStatus' has no attribute 'CANCELLED'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/yeager/Documents/pab_pokerbots/verbose_poker_test.py", line 65, in run_verbose_tournament_test
    async with self.SessionLocal() as db:
               ~~~~~~~~~~~~~~~~~^^
  File "/Users/yeager/Documents/pab_pokerbots/.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 1085, in __aexit__
    await asyncio.shield(task)
  File "/Users/yeager/Documents/pab_pokerbots/.venv/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 1030, in close
    await greenlet_spawn(self.sync_session.close)
  File "/Users/yeager/Documents/pab_pokerbots/.venv/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.switch(*args, **kwargs)
  File "/Users/yeager/Documents/pab_pokerbots/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2521, in close
    self._close_impl(invalidate=False)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/Users/yeager/Documents/pab_pokerbots/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2590, in _close_impl
    transaction.close(invalidate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "<string>", line 2, in close
  File "/Users/yeager/Documents/pab_pokerbots/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 119, in _go
    raise sa_exc.IllegalStateChangeError(
    ...<5 lines>...
    )
sqlalchemy.exc.IllegalStateChangeError: Method 'close()' can't be called here; method 'commit()' is already in progress and this would cause an unexpected state change to <SessionTransactionState.CLOSED: 5> (Background on this error at: https://sqlalche.me/e/20/isce)

